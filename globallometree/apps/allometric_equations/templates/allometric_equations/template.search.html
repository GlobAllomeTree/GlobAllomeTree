{% extends 'base.html' %}
{% load staticfiles %}
{% block script %}

    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.2/leaflet.css" />
    <link rel="stylesheet" href="{% static 'allometric_equations/css/search.css' %}" />

    <script src="{% static 'allometric_equations/js/elastic.min.js' %}"></script>
    <script src="http://cdn.leafletjs.com/leaflet-0.7.2/leaflet.js"></script>


    <script src="{% static 'allometric_equations/js/geohash.js' %}"></script>
    <script src="{% static 'allometric_equations/js/search.js' %}"></script>

    {% if form_is_valid %}
        <script type="text/javascript"> 

            $(function() {
                window.app.config.mapping = {{mapping|safe}};
                window.app.searchManager.search({{search_dict|safe}});
            });

        </script>
    {% endif %}

{% endblock %}

{% block content %}

	<div id="equations_page">
	    {% if current_search_summary %}
            <!-- Search Summary -->
	        {% include 'allometric_equations/template.search.summary.html'%}
	    {% endif %}

        <h3>Equations</h3>
	    

        <div class="clearfix"></div>

        <!-- Search Form -->
        {% include 'allometric_equations/template.search.form.html'%}
		
    	{% if form_is_valid %}
            <div id="search-results">
        		<!-- Result Tabs -->
        		<ul id="results-tab" class="nav nav-tabs">
        			<li>
        				<a href="#results-list" data-toggle="tab" class="active">List</a>
        			</li>
        			<li>
        				<a id="list-tab" href="#results-map" data-toggle="tab">Map</a>
        			</li>
        		</ul>
        		
        		<div class="tab-content">
        			<div class="tab-pane active" id="results-list">
        			
        			</div>
        			
        			<div class="tab-pane" id="results-map">
        				<div id="map"></div>
        			</div>
                </div>
        	</div>	
        {% else %}
            <h3> Invalid Search - Please revise the form for any errors</h3>
    	{% endif %}
	    
    </div>

{% endblock %}